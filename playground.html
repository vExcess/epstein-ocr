<!DOCTYPE html>
<html>
<head>
    <title>Playground</title>
    <style>
        body {
            margin: 0;
        }

        canvas {
            image-rendering: pixelated; /* For modern browsers */
            image-rendering: crisp-edges; /* For better cross-browser compatibility */
        }
    </style>
</head>
<body>
    <canvas id="canvas"></canvas>

    <script>
        const canvas = document.getElementById('canvas');
        const ctx = canvas.getContext('2d');
        
        let docName = "EFTA00382108" //"EFTA00400459"

        const img = new Image();
        img.src = `./files/${docName}/png/${docName}-002.png`; 
        img.onload = () => {
            canvas.width = img.width*2;
            canvas.height = img.height*2;
            ctx.drawImage(img, 0, 0, canvas.width, canvas.height);
            
            // Now you can process it
            const rows = process(ctx, canvas.width, canvas.height);
            const row = rows[0];
            for (let i = 0; i < row.length; i++) {
                const pixels = row[i].imageData.data;
                const chWidth = row[i].imageData.width;
                ctx.putImageData(new ImageData(pixels, chWidth), i * 20, i % 2 === 0 ? 0 : 30);
            }
        };

        function line(a, b, c, d) {
            ctx.beginPath();          // Start a new path
            ctx.moveTo(a+0.5, b+0.5);       // Move to the starting point (50, 50)
            ctx.lineTo(c+0.5, d+0.5);     // Draw a line to the end point (200, 100)
            ctx.lineWidth = 1;        // Set the line width to 5 pixels
            ctx.strokeStyle = "red";  // Set the line color to red
            ctx.stroke();           // Render the line
        }
    </script>

    <script src="./processImage.js"></script>
</body>
</html>